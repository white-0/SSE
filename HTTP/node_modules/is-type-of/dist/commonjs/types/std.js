"use strict";
// Javascript Standard Object
Object.defineProperty(exports, "__esModule", { value: true });
exports.isPromiseLike = exports.isPromise = exports.isGenerator = exports.isError = exports.isDate = exports.isRegExp = exports.isClass = exports.isObject = exports.isAsyncGeneratorFunction = exports.isAsyncFunction = exports.isGeneratorFunction = exports.isFunction = exports.isArray = void 0;
const node_util_1 = require("node:util");
const util_js_1 = require("./util.js");
const debug = (0, node_util_1.debuglog)('is-type-of:std');
// Array
/**
 * returns true if val is array, it won't check items of array
 */
function isArray(val) {
    return Array.isArray(val);
}
exports.isArray = isArray;
// Function
/**
 * returns true if val is function
 */
function isFunction(val) {
    return typeof val === 'function';
}
exports.isFunction = isFunction;
/**
 * returns true if val is generator function
 */
function isGeneratorFunction(val) {
    return node_util_1.types.isGeneratorFunction(val);
}
exports.isGeneratorFunction = isGeneratorFunction;
/**
 * returns true if val is async function
 */
function isAsyncFunction(val) {
    return node_util_1.types.isAsyncFunction(val);
}
exports.isAsyncFunction = isAsyncFunction;
/**
 * returns true if val is async generator function
 */
function isAsyncGeneratorFunction(val) {
    if (!isFunction(val))
        return false;
    return val.constructor && val.constructor.name === 'AsyncGeneratorFunction';
}
exports.isAsyncGeneratorFunction = isAsyncGeneratorFunction;
// Object
/**
 * returns true if val is object
 */
function isObject(val) {
    return typeof val === 'object' && val !== null;
}
exports.isObject = isObject;
/**
 * returns true if val is class
 * *Note:* "class" is supported in ECMAScript 6, and if the code is using some compiler or transpiler, the checking might fail
 */
function isClass(val) {
    if (!isFunction(val))
        return false;
    const fnStr = Function.prototype.toString.call(val);
    if (/^class[\s{]/.test(fnStr))
        return true;
    debug('[isClass] fnStr: %s', fnStr);
    const fnBody = fnStr.replace(/^[^{]*{\s*/, '').replace(/\s*}[^}]*$/, '');
    debug('[isClass] fnBody: %s', fnBody);
    return (/classCallCheck\(/.test(fnBody) || /TypeError\("Cannot call a class as a function"\)/.test(fnBody));
}
exports.isClass = isClass;
/**
 * returns true if val is regular expression
 */
function isRegExp(val) {
    return (0, util_js_1.isInstanceOf)(val, RegExp);
}
exports.isRegExp = isRegExp;
/**
 * returns true if val is instance of Date
 */
function isDate(val) {
    return (0, util_js_1.isInstanceOf)(val, Date);
}
exports.isDate = isDate;
/**
 * returns true if val is instance of Error
 */
function isError(val) {
    return (0, util_js_1.isInstanceOf)(val, Error);
}
exports.isError = isError;
/**
 * returns true if val is generator
 */
function isGenerator(val) {
    return node_util_1.types.isGeneratorObject(val);
}
exports.isGenerator = isGenerator;
/**
 * returns true if val is promise
 */
function isPromise(val) {
    return node_util_1.types.isPromise(val);
}
exports.isPromise = isPromise;
/**
 * returns true if val is like promise, if the object has `then` property, the checking will pass.
 */
function isPromiseLike(val) {
    if (isPromise(val))
        return true;
    if (!isObject(val))
        return false;
    return (0, util_js_1.hasOwnProperty)(val, 'then') && typeof val.then === 'function';
}
exports.isPromiseLike = isPromiseLike;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3R5cGVzL3N0ZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsNkJBQTZCOzs7QUFFN0IseUNBQTRDO0FBQzVDLHVDQUF5RDtBQUd6RCxNQUFNLEtBQUssR0FBRyxJQUFBLG9CQUFRLEVBQUMsZ0JBQWdCLENBQUMsQ0FBQztBQUV6QyxRQUFRO0FBRVI7O0dBRUc7QUFDSCxTQUFnQixPQUFPLENBQVUsR0FBYTtJQUM1QyxPQUFPLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDNUIsQ0FBQztBQUZELDBCQUVDO0FBRUQsV0FBVztBQUVYOztHQUVHO0FBQ0gsU0FBZ0IsVUFBVSxDQUFxQixHQUFhO0lBQzFELE9BQU8sT0FBTyxHQUFHLEtBQUssVUFBVSxDQUFDO0FBQ25DLENBQUM7QUFGRCxnQ0FFQztBQUVEOztHQUVHO0FBQ0gsU0FBZ0IsbUJBQW1CLENBQUMsR0FBYTtJQUMvQyxPQUFPLGlCQUFLLENBQUMsbUJBQW1CLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDeEMsQ0FBQztBQUZELGtEQUVDO0FBRUQ7O0dBRUc7QUFDSCxTQUFnQixlQUFlLENBQUMsR0FBYTtJQUMzQyxPQUFPLGlCQUFLLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3BDLENBQUM7QUFGRCwwQ0FFQztBQUVEOztHQUVHO0FBQ0gsU0FBZ0Isd0JBQXdCLENBQUMsR0FBYTtJQUNwRCxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQztRQUFFLE9BQU8sS0FBSyxDQUFDO0lBQ25DLE9BQU8sR0FBRyxDQUFDLFdBQVcsSUFBSSxHQUFHLENBQUMsV0FBVyxDQUFDLElBQUksS0FBSyx3QkFBd0IsQ0FBQztBQUM5RSxDQUFDO0FBSEQsNERBR0M7QUFFRCxTQUFTO0FBRVQ7O0dBRUc7QUFDSCxTQUFnQixRQUFRLENBQUMsR0FBYTtJQUNwQyxPQUFPLE9BQU8sR0FBRyxLQUFLLFFBQVEsSUFBSSxHQUFHLEtBQUssSUFBSSxDQUFDO0FBQ2pELENBQUM7QUFGRCw0QkFFQztBQUVEOzs7R0FHRztBQUNILFNBQWdCLE9BQU8sQ0FBa0IsR0FBYTtJQUNwRCxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQztRQUFFLE9BQU8sS0FBSyxDQUFDO0lBQ25DLE1BQU0sS0FBSyxHQUFHLFFBQVEsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNwRCxJQUFJLGFBQWEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQUUsT0FBTyxJQUFJLENBQUM7SUFDM0MsS0FBSyxDQUFDLHFCQUFxQixFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3BDLE1BQU0sTUFBTSxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsWUFBWSxFQUFFLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxZQUFZLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDekUsS0FBSyxDQUFDLHNCQUFzQixFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQ3RDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksa0RBQWtELENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7QUFDOUcsQ0FBQztBQVJELDBCQVFDO0FBRUQ7O0dBRUc7QUFDSCxTQUFnQixRQUFRLENBQUMsR0FBYTtJQUNwQyxPQUFPLElBQUEsc0JBQVksRUFBQyxHQUFHLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDbkMsQ0FBQztBQUZELDRCQUVDO0FBRUQ7O0dBRUc7QUFDSCxTQUFnQixNQUFNLENBQUMsR0FBYTtJQUNsQyxPQUFPLElBQUEsc0JBQVksRUFBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDakMsQ0FBQztBQUZELHdCQUVDO0FBRUQ7O0dBRUc7QUFDSCxTQUFnQixPQUFPLENBQUMsR0FBYTtJQUNuQyxPQUFPLElBQUEsc0JBQVksRUFBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDbEMsQ0FBQztBQUZELDBCQUVDO0FBRUQ7O0dBRUc7QUFDSCxTQUFnQixXQUFXLENBQUMsR0FBYTtJQUN2QyxPQUFPLGlCQUFLLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDdEMsQ0FBQztBQUZELGtDQUVDO0FBRUQ7O0dBRUc7QUFDSCxTQUFnQixTQUFTLENBQVUsR0FBYTtJQUM5QyxPQUFPLGlCQUFLLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzlCLENBQUM7QUFGRCw4QkFFQztBQUVEOztHQUVHO0FBQ0gsU0FBZ0IsYUFBYSxDQUFVLEdBQWE7SUFDbEQsSUFBSSxTQUFTLENBQUMsR0FBRyxDQUFDO1FBQUUsT0FBTyxJQUFJLENBQUM7SUFDaEMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUM7UUFBRSxPQUFPLEtBQUssQ0FBQztJQUNqQyxPQUFPLElBQUEsd0JBQWMsRUFBQyxHQUFHLEVBQUUsTUFBTSxDQUFDLElBQUksT0FBTyxHQUFHLENBQUMsSUFBSSxLQUFLLFVBQVUsQ0FBQztBQUN2RSxDQUFDO0FBSkQsc0NBSUMifQ==