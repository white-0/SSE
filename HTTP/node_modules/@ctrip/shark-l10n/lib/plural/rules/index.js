"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PluralRule = void 0;
var mappping_1 = require("./mappping");
var PluralRule = (function () {
    function PluralRule(locale) {
        var lang = locale.substr(0, 2).toUpperCase();
        var normalizedLocale = this.normalizeLocale(locale);
        this.rule = mappping_1.RULE_MAPPING[normalizedLocale] || mappping_1.RULE_MAPPING[lang] || mappping_1.RULE_MAPPING.DEFAULT;
    }
    PluralRule.prototype.normalizeLocale = function (locale) {
        var ret = locale.replace('_', '-');
        var arr = ret.split('-');
        ret = arr[0].toLowerCase() + '-' + ((arr[1] && arr[1].toUpperCase()) || '');
        if (!/^[a-z]{2}(?:-[A-Z]{2}){0,1}$/.test(ret)) {
            return 'en-US';
        }
        return ret;
    };
    Object.defineProperty(PluralRule.prototype, "size", {
        get: function () {
            return this.rule.length;
        },
        enumerable: false,
        configurable: true
    });
    PluralRule.prototype.getSuffix = function (index) {
        return this.rule[index][0];
    };
    PluralRule.prototype.canMatch = function (index) {
        return this.rule[index][1];
    };
    return PluralRule;
}());
exports.PluralRule = PluralRule;
