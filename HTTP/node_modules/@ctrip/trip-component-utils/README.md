# Trip Component Browser Utils

## Api

```ts
/**
 * 获取当前环境的 env
 */
function getTripEnv(): 'fws' | 'lpt' | 'uat' | 'prod';

/**
 * 格式化 locale
 */
type LocaleStyle = 'aa-BB' | 'aa-bb' | 'AA-bb' | 'AA-BB' | 'aa_BB' | 'aa_bb' | 'AA_bb' | 'AA_BB';
function formatLocale(locale: string, style: LocaleStyle): string;

/**
 * 格式化 env
 */
function formatTripEnv(env: string): 'fws' | 'lpt' | 'uat' | 'prod';

/**
 * 判断是 Browser 环境还是 Node 环境
 */
function getRuntimeType(): RuntimeType;

interface RuntimeType {
  type: 'browser' | 'node';
  isBrowser: boolean;
  isNode:  boolean;
}

/**
 * 从语种中获取到语言类型
 * @param locale
 */
function getLangFromLocale(locale: string): string;

/**
 * 依据 locale 获取站点
 * @param locale
 */
function getSiteByLocale(locale: string): string;

/**
 * transform url with trip context
 * example: formatUrlWithTripContext('https://www.trip.com/path', {locale: 'en-US', currency: 'USD'}) => 'https://www.trip.com/path?locale=en-US&curr=USD'
 * example: formatUrlWithTripContext('//www.trip.com/path', {locale: 'en-US', currency: 'USD'}) => '//www.trip.com/path?locale=en-US&curr=USD'
 * example: formatUrlWithTripContext('/path', {locale: 'en-US', currency: 'USD'}) => '/path?locale=en-US&curr=USD'
 * example: formatUrlWithTripContext('/path?currency=JPY', {locale: 'en-US', currency: 'USD'}) => '/path?curr=JPY'
 */
function formatUrlWithTripContext(
  url: string,
  tripContext: {
    locale: string;
    currency: string;
    [key: string]: any;
  }
  opt?: {
    isCover?: boolean;  // default false
  }
): string; 
// Please used with useTripContext(), for example:
// const tripContext = useTripContext();
// const newUrl = formatUrlWithTripContext(url, tripContext);
```

## Browser Only

```typescript
/**
 * get ubt vid from cookie
 */
function getVid(): string;

/**
 * get union info from cookie
 */
function getUnion(): { aid: string; sid: string; };

/**
 * get locale from cookie;
 */
function getLocale(): string;

/**
 * get currency from cookie;
 */
function getCurrency(): string;

/**
 * get group by host
 */
function getGroup(): 'trip' | 'ctrip';

/**
 * transform url with cargo context
 * example: formatUrlWithCargo('https://www.trip.com/path') => 'https://www.trip.com/path?locale=en-US&curr=USD'
 * example: formatUrlWithCargo('//www.trip.com/path') => '//www.trip.com/path?locale=en-US&curr=USD'
 * example: formatUrlWithCargo('/path') => '/path?locale=en-US&curr=USD'
 * example: formatUrlWithCargo('/path?currency=JPY') => '/path?curr=JPY'
 */
function formatUrlWithCargo(
  url: string,
  opt?: {
    isCover?: boolean;  // default false
    isOnline?: boolean;
    isH5?: boolean;
  }
): string; 
```
