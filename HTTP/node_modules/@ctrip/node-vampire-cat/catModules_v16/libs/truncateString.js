function truncateString(str, len) {
	if (/\r?\n/.test(str)) {
		try {
			str = JSON.stringify(JSON.parse(str));
		} catch (e) {
			str = str.replace(/(\r?\n)+/g, ' ');
		}
	}
	if (str.length > len) {
		str = str.slice(0, len) + '...[' + str.length + ']';
	}
	return str;
}

module.exports = truncateString;