"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.batEventAggregator = void 0;
const BaseAggregator_1 = require("./BaseAggregator");
/**
 * 聚合Event,无需关联上下文
 */
class BatEventAggregator extends BaseAggregator_1.Aggregator {
    constructor() {
        super();
        this.aggregatorRules = {};
        this.StatData = EventData;
    }
    /**
     * event 暂时不需要聚合
     * @param param0
     * @returns
     */
    aggregateFilter({ type, name }) {
        return {
            type,
            name
        };
    }
}
exports.batEventAggregator = new BatEventAggregator();
function EventData(type, name) {
    this.type = type;
    this.name = name;
    this.count = 0;
    this.sum = 0;
    this.error = 0;
    this.messageId = null;
}
EventData.prototype.add = function (event) {
    this.count++;
    (event.__messageId && !this.messageId) && (this.messageId = event.__messageId);
    (event.__type && event.__type === 'error') && this.error++;
};
