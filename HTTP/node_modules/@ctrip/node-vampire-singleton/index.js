const path = require('path');
const {
    createRequire
} = require('module');
const entry = (require.main && require.main.filename) ||
    (process.argv[1] && path.resolve(process.cwd(), process.argv[1]));
const entryPath = entry ? path.dirname(entry) : process.cwd();
const _require = createRequire(entryPath);
module.exports = function (moduleName) {
    let ret = null;
    let module = null;
    try {
        module = _require(moduleName);
    } catch (e) {
        // empty
    }

    if (module) {
        for (let key in module) {
            if (Object.prototype.hasOwnProperty.call(module, key)) {
                ret = module;
            }
            break;
        }
    }
    return ret;
};