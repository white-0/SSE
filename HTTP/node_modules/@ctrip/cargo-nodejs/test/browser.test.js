'use strict'
const { JSDOM }  = require('jsdom')
const assert = require('assert')

/**
 * @param {import('../index')} cargo
 */
module.exports = (cargo) => {
  const dom = new JSDOM(`<html data-cargo="locale:en-US,language:en,currency:PLN,site:EN,group:Trip,contextType:online"><body><div></div></body></html>`)
  global.window = dom.window

  it('getLocale', () => {
    assert.strictEqual(cargo.getLocale(), 'en-US')
  })

  it('setLocale', () => {
    const locale = 'en-XX'
    cargo.setLocale(locale)
    assert.strictEqual(cargo.getLocale(), locale)
  })

  it('getLanguage', () => {
    assert.strictEqual(cargo.getLanguage(), 'en')
  })

  it('setLanguage', () => {
    const language = 'zh'
    cargo.setLanguage(language)
    assert.strictEqual(cargo.getLanguage(), language)
  })

  it('getCurrency', () => {
    assert.strictEqual(cargo.getCurrency(), 'PLN')
  })

  it('setCurrency', () => {
    const currency = 'USD'
    cargo.setCurrency(currency)
    assert.strictEqual(cargo.getCurrency(), currency)
  })

  it('getSite', () => {
    assert.strictEqual(cargo.getSite(), 'EN')
  })

  it('setSite', () => {
    const site = 'HK'
    cargo.setSite(site)
    assert.strictEqual(cargo.getSite(), site)
  })

  it('getGroup', () => {
    assert.strictEqual(cargo.getGroup(), 'Trip')
  })

  it('setGroup', () => {
    const group = 'Ctrip'
    cargo.setGroup(group)
    assert.strictEqual(cargo.getGroup(), group)
  })

  it('getContextType', () => {
    assert.strictEqual(cargo.getContextType(), 'online')
  })

  it('setContextType', () => {
    const contextType = 'h5'
    cargo.setContextType(contextType)
    assert.strictEqual(cargo.getContextType(), contextType)
  })
}
