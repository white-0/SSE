## SOA Client APIs ##

soa Client： fws/fat/lpt环境默认请求当前子环境相同的子环境下服务，如找不到则在fws下找；否则按照子环境优先级，优先请求优先级最高的子环境下的服务

- **Class** *soaInstance* SoaDirectApi(opts).then(()=>{})
	- opts as object
	    - serviceId as string (serviceId和serviceCode两者选一即可)
		- serviceCode as string or int
		- serviceTimeout as int (optional)
		- format as string //指定编码格式
- **Method** *void* soaInstance.invoke(opts).then(()=>{})
    - opts as object
	    - method as string
	    - args as object
	    - skipValid as boolean [default: true]
        - query as object (optional) 子环境传递的方式之一：args中追加子环境信息,如：{"subEnv":"fat55"}

    - 如何指定fat的某个子环境:

          方式一：为方便调试，新版本会优先读取server.properties文件中的子环境，如果匹配不到该子环境下的服务，则找fws环境下的服务

          非linux可在当前工作路径下写入文件：server.properties文件，参数：subEnv=XXX,否则默认当前子环境为fws;linux系统自动读取/opt/settings/server.properties;

          方式二：如果以传参的方式指定子环境，如：testSoa.invoke('getBrowseHistory',{},false,{"subEnv":"fat55"}).then(()=>{})，如果server.properties存在且设定参数subEnv，会优先使用代码中的子环境

example:

    let SoaDirectApi=require("@ctrip/node-vampire-soa-client")
    let soaDirectApi = new SoaDirectApi({
        serviceCode:'14116'
        //serviceId: "international.ibusecureapi.v1.ibusecureapi",
        // serviceTimeout: 1, //可以自定义timeout
        //soaServerUrl:'http://localhost:8080/nodejs' //调用本地node soa服务端 调试
    })

    soaDirectApi.init().then(() => {
    let options={method: 'GetUserInfoByTicket', args: {"Ticket": "6VZOa8KBwgxPu+r+VblSSkBptL4Jva7mqF1O6oeKJatTaFkDT6ut7F2fNoh7yW+/V26xDmja2yFsXxitKxduBfB1u5i3AKwuTXneEgSh/d/i9Sey84SiXFbtFCs1v71Z8IBIUn3mTj2sKJ6WrUAjzRRynoB/VBPIMFA3DQ24q/dW0F051wudP/3XiR1EN191YJz4Rlw9v9+n+Q3JAhShQSMAChWN7No+/g+pZFUZk2kcm9WzpaI8Ml3O3aWCGQQ8WyL3aqMcoLGJiRz0QhedBMeBJ7NMDurphPPzBaLZIiE="}, skipValid: false}
        soaDirectApi.invoke(options).then((datas) => {
            console.log(datas)
        }).catch((err) => {
           console.log(err)
        })
    }).catch((err) => {
        console.log(err)
    })


