const {SoaDirectApi} = require('../index');

let soaDirectApi = new SoaDirectApi({
    //serviceId: '16264.nodesoatestserver',
    // format: 'json',
    // serviceTimeout: 1, //可以自定义timeout
    // soaServerUrl:'http://localhost:8080/nodejs', //调用本地node soa服务端 调试
    serviceCode: '16264',
    subEnv: 'fat5'
});
soaDirectApi.init().then(() => {
    setInterval(() => {
        soaDirectApi.invoke({
            method: 'hello',
            args: {skipValid:true},
            skipValid: true,
            reqEphemeralParams: {
                headers: {
                    'x-ctrip-canary-req': 1,
                    'Cookie': 'ww',
                    'X-Requested-With': 'XMLHttpRequest'
                }
            }
        }).then((result) => {
            console.log('success', result);
        }).catch((err) => {
            console.log('====', err);
        });
    }, 500)
}).catch((err) => {
    console.log('__----', err);
});
