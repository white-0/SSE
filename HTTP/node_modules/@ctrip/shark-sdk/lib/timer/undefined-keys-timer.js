'use strict'
const AbstractTimer = require('./abstract-timer')
const constants = require('../common/constants')
const metric = require('../metric')
const logger = require('../log')

class ReportUndefinedKeysTimer extends AbstractTimer {
  constructor () {
    super(
      constants.INTERVALS.REPORT_KEYS,
      constants.INTERVALS.REPORT_KEYS
    )
  }

  run () {
    return metric.reportUndefinedKeys()
      .then(() => {
        logger.debug('report undefined keys success!')
      })
      .catch(e => {
        logger.warning('report undefined keys error!', e)
      })
  }
}

module.exports = ReportUndefinedKeysTimer
