'use strict'
const AbstractTimer = require('./abstract-timer')
const metric = require('../metric')
const constants = require('../common/constants')
const logger = require('../log')

class ReportUsedKeysTimer extends AbstractTimer {
  constructor () {
    super(
      constants.INTERVALS.REPORT_KEYS,
      constants.INTERVALS.REPORT_KEYS
    )
  }

  run () {
    return metric.reportUsedKeys()
      .then(() => {
        logger.debug('report recent used keys success')
      })
      .catch(e => {
        logger.warning('report recent used keys error', e)
      })
  }
}

module.exports = ReportUsedKeysTimer
